# Ollama Configuration
OLLAMA_HOST=http://ollama:11434
OLLAMA_DEFAULT_MODEL=llama3.1:8b

# Qdrant Vector Database
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_COLLECTION_NAME=devops_docs

# Embedding Model Configuration
# Note: Changing the embedding model requires full re-ingestion (make ingest)
EMBEDDING_MODEL=BAAI/bge-base-en-v1.5
EMBEDDING_DIMENSION=768

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50  # Maximum connections in the pool
REDIS_SOCKET_TIMEOUT=5.0  # Socket timeout in seconds
REDIS_SOCKET_CONNECT_TIMEOUT=5.0  # Connection timeout in seconds

# PostgreSQL Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=raguser
POSTGRES_PASSWORD=ragpassword
POSTGRES_DB=ragdb

# RAG Configuration
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
TOP_K_RESULTS=5
CONTEXT_WINDOW=4096

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
LOG_LEVEL=info

# Frontend Configuration
REACT_APP_API_URL=http://localhost:8000

# Document Ingestion
DOCS_DIR=/data/docs
CUSTOM_DOCS_DIR=/data/custom
MAX_WORKERS=4

# Monitoring Configuration
ENABLE_PROMETHEUS_METRICS=true
ENABLE_RETRIEVAL_METRICS=true

# Hybrid Search Configuration (Phase 4)
# Combines BM25 keyword matching with semantic vector search
HYBRID_SEARCH_ENABLED=false
HYBRID_SEARCH_ALPHA=0.5  # Weight: 0=sparse only, 1=dense only, 0.5=balanced
HYBRID_RRF_K=60  # RRF constant (higher = more emphasis on top ranks)
SPARSE_ENCODER_MODEL=Qdrant/bm25

# HyDE (Hypothetical Document Embeddings) Configuration
# Generates a hypothetical document to improve retrieval for vague queries
HYDE_ENABLED=false
HYDE_MODEL=llama3.1:8b  # Model for generating hypothetical documents
HYDE_TEMPERATURE=0.3  # Lower = more focused generation
HYDE_MAX_TOKENS=256  # Max length of hypothetical document
HYDE_TIMEOUT_SECONDS=10.0  # Timeout for HyDE generation

# Web Search Fallback (Tavily) Configuration
# Falls back to web search when local retrieval scores are low
WEB_SEARCH_ENABLED=false
TAVILY_API_KEY=  # Get free API key at https://tavily.com
WEB_SEARCH_MIN_SCORE_THRESHOLD=0.4  # Trigger web search when avg score below this
WEB_SEARCH_MAX_RESULTS=5  # Number of web results to fetch
WEB_SEARCH_TIMEOUT_SECONDS=10.0  # Timeout for web search
WEB_SEARCH_INCLUDE_DOMAINS=  # Comma-separated whitelist (e.g., docs.aws.amazon.com,kubernetes.io)
WEB_SEARCH_EXCLUDE_DOMAINS=  # Comma-separated blacklist

# A/B Testing Configuration
# Enable/disable A/B testing functionality
AB_TESTING_ENABLED=true
# Automatically record latency metrics for experiments
AB_TESTING_AUTO_RECORD_METRICS=true
# Default experiment to run (leave empty for none)
AB_TESTING_DEFAULT_EXPERIMENT=

# Grafana Configuration (default credentials)
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin

# Authentication Configuration
# Master toggle to enable/disable authentication system
AUTH_ENABLED=false
# Session token lifetime in hours (default: 24 hours)
SESSION_EXPIRE_HOURS=24
# Prefix for generated API keys (helps identify keys in logs/databases)
API_KEY_PREFIX=rag_
# Require email verification before allowing user access
REQUIRE_EMAIL_VERIFICATION=false
